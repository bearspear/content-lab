<div class="tetris-container">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <h1>🎮 Tetris</h1>
      <p class="subtitle">Classic block-stacking puzzle game</p>
    </div>
    <div class="header-actions">
      <button class="sound-btn" (click)="toggleSound()" [class.active]="soundEnabled" title="Toggle Sound">
        <span *ngIf="soundEnabled">🔊</span>
        <span *ngIf="!soundEnabled">🔇</span>
      </button>
      <app-reset-button (reset)="onReset()"></app-reset-button>
    </div>
  </div>

  <!-- Game Area -->
  <div class="game-area">
    <!-- Side Panel - Stats -->
    <div class="side-panel left-panel">
      <div class="stat-card">
        <div class="stat-label">Score</div>
        <div class="stat-value">{{ score }}</div>
      </div>

      <div class="stat-card">
        <div class="stat-label">Level</div>
        <div class="stat-value">{{ level }}</div>
      </div>

      <div class="stat-card">
        <div class="stat-label">Lines</div>
        <div class="stat-value">{{ lines }}</div>
      </div>

      <div class="stat-card high-score">
        <div class="stat-label">🏆 High Score</div>
        <div class="stat-value">{{ highScore }}</div>
      </div>
    </div>

    <!-- Game Board -->
    <div class="game-board-container">
      <!-- Start Screen -->
      <div class="overlay start-screen" *ngIf="!gameStarted && !gameOver">
        <div class="overlay-content">
          <h2>🎮 TETRIS</h2>
          <p>Press <kbd>ENTER</kbd> to Start</p>
          <div class="controls-help">
            <h3>Controls</h3>
            <div class="control-row">
              <kbd>←</kbd><kbd>→</kbd> Move
            </div>
            <div class="control-row">
              <kbd>↑</kbd> Rotate
            </div>
            <div class="control-row">
              <kbd>↓</kbd> Soft Drop
            </div>
            <div class="control-row">
              <kbd>SPACE</kbd> Hard Drop
            </div>
            <div class="control-row">
              <kbd>P</kbd> Pause
            </div>
          </div>
        </div>
      </div>

      <!-- Pause Screen -->
      <div class="overlay pause-screen" *ngIf="paused && !gameOver">
        <div class="overlay-content">
          <h2>⏸️ PAUSED</h2>
          <p>Press <kbd>P</kbd> to Resume</p>
        </div>
      </div>

      <!-- Game Over Screen -->
      <div class="overlay game-over-screen" *ngIf="gameOver">
        <div class="overlay-content">
          <h2>💀 GAME OVER</h2>
          <div class="final-stats">
            <p>Score: <strong>{{ score }}</strong></p>
            <p>Level: <strong>{{ level }}</strong></p>
            <p>Lines: <strong>{{ lines }}</strong></p>
            <p *ngIf="score === highScore" class="new-high-score">🎉 NEW HIGH SCORE! 🎉</p>
          </div>
          <p>Press <kbd>ENTER</kbd> to Play Again</p>
        </div>
      </div>

      <!-- Tetris Board (Canvas) -->
      <canvas #gameCanvas class="game-board" [class.game-active]="gameStarted && !gameOver"></canvas>
    </div>

    <!-- Side Panel - Next Piece -->
    <div class="side-panel right-panel">
      <div class="next-piece-card">
        <div class="card-title">Next Piece</div>
        <canvas #nextPieceCanvas class="next-piece-preview"></canvas>
      </div>

      <div class="instructions-card">
        <h4>🎯 How to Play</h4>
        <ul>
          <li>Stack blocks to clear lines</li>
          <li>Clear multiple lines for bonus points</li>
          <li>Game speeds up every 10 lines</li>
          <li>Don't let blocks reach the top!</li>
        </ul>
      </div>

      <div class="scoring-card">
        <h4>💰 Scoring</h4>
        <div class="score-row">1 Line: 100 × Level</div>
        <div class="score-row">2 Lines: 300 × Level</div>
        <div class="score-row">3 Lines: 500 × Level</div>
        <div class="score-row">4 Lines: 800 × Level</div>
      </div>
    </div>
  </div>

  <!-- Footer Tips -->
  <div class="footer-tips">
    <div class="tip">
      <strong>💡 Pro Tip:</strong> Use the hard drop (SPACE) to quickly place pieces and earn bonus points!
    </div>
  </div>
</div>
